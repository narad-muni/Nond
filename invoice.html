<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.min.js"></script>
  </head>
  <body>
    <div id="pdf"></div>

    <script>

        let invoiceDate = "May 15, 2023";
        let invoiceNo = "NMSA-24-123";
        let invoiceCGST = "254";
        let invoiceSGST = "254";
        let invoiceAmount = "₹ 12540";
        let invoiceAmountInWords = "INR Twenty Eight Thousand Three Hundred Twenty Only";
        let invoiceTaxAmount = "12345";
        let invoiceTaxAmountInWords = "INR Twenty Eight Thousand Three Hundred Twenty Only";
        
        let generateDate = "";
        
        let companyName = "Nikhil M Shah and Associates";
        let companyAddress = `Shop No 4, Ground Floor.
                                Sargam CHS, Near Shivsena Office,
                                Charai, Thane West 400601`;
        let companyUPI = "upi://pay?pa=shiv1990baba@oksbi&pn=Nikhil M Shah&cu=INR"
        let companyGST = "27AAQFN4919D1Z1"
        let companyEmail = "canikhilshah@gmail.com"
        let companyLogo = "canikhilshah@gmail.com"

        let clientName = "JJ Industries";
        let clientAddress = `Flat No 1403, Lifescapes Mirage CHS,
                        Plot No 269, Senapati Bapat Marg, Matunga,West,
                        Mumbai 400016`;
        let clientLogo = "canikhilshah@gmail.com"

        var dd = {
            content: [
                {
                    columns: [
                    {
                        image: "logo",
                        fit: [80, 80], // 135w 80 h,
                        width: 80,
                        alignment: "center"
                    },
                    {
                        stack: [
                            {
                                text: companyName,
                                bold: true,
                                fontSize: '13',
                                margin: [0,0,0,8]
                            },
                            {
                                columns: [
                                    {
                                        text: companyAddress,
                                        fontSize: '10'
                                    },
                                    {
                                        text: `GSTIN/UIN: 27AAQFN4919D1Z1
                                        State Name : Maharashtra
                                        Code : 27
                                        E-Mail : canikhilshah@gmail.com`,
                                        fontSize: '10'
                                    },
                                ],
                            },
                        ],
                        width: 'auto',
                    },
                    {
                        layout: "lightHorizontalLines",
                        table: {
                        body: [
                            ["", ""],
                            ["Invoice #", invoiceNo],
                            ["", ""],
                            ["", ""],
                            ["Date ", invoiceDate],
                            ["", ""],
                        ],
                        },
                        widths: ["auto"],
                        width: '150'
                    },
                    ],
                    columnGap: 10,
                    margin: 5,
                },
                {
                    columns: [
                    {
                        image: "logo",
                        fit: [80, 80], // 135w 80 h,
                        width: 80,
                        alignment: "center"
                    },
                    {
                        stack: [
                            {
                                text: clientName,
                                bold: true,
                                fontSize: '13',
                                margin: [0,0,0,8]
                            },
                            {
                                columns: [
                                    {
                                        text: clientAddress,
                                        fontSize: '10'
                                    },
                                    {
                                        text: `GSTIN/UIN: 27AAQFN4919D1Z1
                                        State Name : Maharashtra
                                        Code : 27
                                        E-Mail : canikhilshah@gmail.com`,
                                        fontSize: '10'
                                    },
                                ],
                            },
                        ],
                        width: 'auto',
                    },
                    {
                        width: 65,
                        margin: [0, 25, 0, 0],
                        text: "Scan to pay",
                    },
                    {
                        qr: companyUPI,
                        fit: 90,
                        width: 90,
                    },
                    ],
                    columnGap: 10,
                    margin: 5,
                },
                {
                    table: {
                        headerRows: 1,
                        body: [
                            [
                                "Service",
                                "Description",
                                "HSN/SAC",
                                "Amount"
                            ],
                            Array(4).fill({text:"", colSpan: 4}),
                            [
                                "GST",
                                {
                                    text: "GST 3B Filling",
                                    fontSize: 10
                                },
                                "123456",
                                "2050"
                            ],
                            [
                                "GST",
                                {
                                    text: "GST 3B Filling",
                                    fontSize: 10
                                },
                                "123456",
                                "2050"
                            ],
                            Array(4).fill({text:"", colSpan: 4}),
                            [
                                {
                                    text: "CGST",
                                    colSpan: 2,
                                    alignment: 'right'
                                },
                                "",
                                "",
                                "254"
                            ],
                            [
                                {
                                    text: "SGST",
                                    colSpan: 2,
                                    alignment: 'right'
                                },
                                "",
                                "",
                                "254"
                            ],
                            Array(4).fill({text:"", colSpan: 4}),
                            [
                                {
                                    text: "Total",
                                    colSpan: 2,
                                    alignment: 'right'
                                },
                                "",
                                "",
                                "₹ 12540"
                            ],
                            [
                                {
                                    stack: [
                                        {
                                            text: "Amount Chargeable (in words)",
                                            fontSize: 9,
                                            margin: [0,0,0,4]
                                        },
                                        {
                                            text: "INR Twenty Eight Thousand Three Hundred Twenty Only",
                                            fontSize: 12,
                                            bold: true
                                        }
                                    ],
                                    colSpan: 4
                                },
                                Array(3).fill(""),
                            ]
                        ],
                        widths: "*",
                    },
                    margin: [0, 15, 0, 0],
                },
                {
                    table: {
                        headerRows: 2,
                        body: [
                            [
                                {
                                    text: "HSN/SAC",
                                    rowSpan: 2
                                },
                                {
                                    text: "Taxable Value",
                                    rowSpan: 2,
                                    alignment: 'center'
                                },
                                {
                                    text: "State Tax",
                                    colSpan: 2,
                                    alignment: 'center'
                                },
                                '',
                                {
                                    text: "Central Tax",
                                    colSpan: 2,
                                    alignment: 'center'
                                },
                                '',
                                {
                                    text: "Total Taxable Amount",
                                    rowSpan: 2,
                                    alignment: 'center'
                                },
                            ],
                            [
                                '','','Rate','Amount','Rate','Amount',''
                            ],
                            Array(7).fill({text:"", colSpan: 7}),
                            [
                                123456,
                                124541,
                                "9%",
                                125,
                                "9%",
                                125,
                                15540
                            ],
                            Array(7).fill({text:"", colSpan: 7}),
                            [
                                {
                                    text: "Total",
                                    alignment: "right",
                                    bold: true
                                },
                                12345,
                                '',
                                125,
                                '',
                                125,
                                124540
                            ],
                            [
                                {
                                    stack: [
                                        {
                                            text: "Tax amount in words",
                                            fontSize: 9,
                                            margin: [0,0,0,4]
                                        },
                                        {
                                            text: "INR Twenty Eight Thousand Three Hundred Twenty Only",
                                            fontSize: 12,
                                            bold: true
                                        }
                                    ],
                                    colSpan: 7
                                },
                                ...Array(6).fill(""),
                            ]
                        ],
                        widths: "*",
                    },
                    margin: [0, 15, 0, 15],
                },
                {
                    columns: [
                        {
                            text: `Company’s Bank Details
                            A/c Holder’s Name : Nikhil M Shah & Associates
                            Bank Name : TJSB Bank Limited
                            A/c No. : 002120100009009
                            Branch & IFS Code : Thane Main & TJSB0000002
                            `,
                            width: "*"
                        },
                        {
                            text: "Company’s PAN : AAQFN4919D",
                            width: "*"
                        }
                    ],
                    margin: [0, 0, 0, 15],
                },
                {
                    columns: [
                        {
                            text: "",
                            width: "*"
                        },
                        {
                            table: {
                                body: [
                                    [
                                        {
                                            stack: [
                                                {
                                                    stack: [
                                                        {
                                                            text: `for `+companyName
                                                        },
                                                        {
                                                            text: `Nikhil Mansukhlal Shah
                                                            Digitally Signed on `+generateDate+` 23:24`,
                                                            fontSize: 10
                                                        },
                                                        {
                                                            text: `Authorised Signatory`
                                                        }
                                                    ]
                                                },
                                                {
                                                    image: 'logo2',
                                                    alignment: "center",
                                                    margin: [0,5,0,0],
                                                    fit: [180,50]
                                                }
                                            ]
                                        }
                                    ]
                                ]
                            },
                            width: "auto"
                        }
                    ]
                }
            ],
            pageMargins: 10,
            images: {
                logo: "https://picsum.photos/seed/1/50",
                logo2: "https://picsum.photos/seed/1/200/50",
            },
        };

        pdfMake.createPdf(dd).getDataUrl(function (dataUrl) {
            var iframe = document.createElement("iframe");
            iframe.src = dataUrl + "#zoom=70";
            iframe.style.width = "60%";
            iframe.style.height = "95vh";
            document.getElementById("pdf").innerHTML = "";
            document.getElementById("pdf").appendChild(iframe);
        });
    </script>
  </body>
</html>
